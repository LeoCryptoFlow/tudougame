<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœŸè±†å¤§äºº vs çŒªå…«æˆ’ - å²è¯—å¯¹å†³</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(180deg, #1a0a2e 0%, #2d1b4e 30%, #1a0a2e 100%);
            min-height: 100vh;
            overflow: hidden;
            font-family: 'STKaiti', 'KaiTi', serif;
        }
        
        .container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }
        
        /* æ˜Ÿç©ºèƒŒæ™¯ */
        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        /* æ ‡é¢˜ */
        .title {
            position: absolute;
            top: 3%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2.5rem;
            color: #ffd700;
            text-shadow: 0 0 10px #ff6600, 0 0 20px #ff3300, 0 0 30px #ff0000;
            white-space: nowrap;
            animation: titleGlow 2s ease-in-out infinite alternate;
            z-index: 100;
        }
        
        @keyframes titleGlow {
            from { text-shadow: 0 0 10px #ff6600, 0 0 20px #ff3300; }
            to { text-shadow: 0 0 20px #ffd700, 0 0 40px #ff6600, 0 0 60px #ff3300; }
        }
        
        /* æˆ˜æ–—åœºåœ° */
        .battle-ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 200px;
            background: linear-gradient(180deg, transparent 0%, rgba(139, 69, 19, 0.3) 50%, rgba(101, 67, 33, 0.8) 100%);
        }
        
        /* åœŸè±†å¤§äºº */
        .potato {
            position: absolute;
            bottom: 180px;
            left: 15%;
            transform: translateX(-50%);
            cursor: pointer;
            transition: all 0.3s;
            z-index: 50;
        }
        
        .potato:hover {
            transform: translateX(-50%) scale(1.1);
        }
        
        .potato-body {
            position: relative;
            animation: potatoFloat 2s ease-in-out infinite;
        }
        
        @keyframes potatoFloat {
            0%, 100% { transform: translateY(0) rotate(-2deg); }
            50% { transform: translateY(-15px) rotate(2deg); }
        }
        
        /* åœŸè±†æ”»å‡»åŠ¨ç”» */
        .potato.attacking {
            animation: potatoAttack 0.5s ease-out;
        }
        
        @keyframes potatoAttack {
            0% { left: 15%; }
            50% { left: 35%; transform: translateX(-50%) scale(1.2); }
            100% { left: 15%; }
        }
        
        /* åœŸè±†å—ä¼¤åŠ¨ç”» */
        .potato.hurt {
            animation: potatoHurt 0.5s ease-out;
        }
        
        @keyframes potatoHurt {
            0%, 100% { filter: brightness(1); }
            25%, 75% { filter: brightness(2) hue-rotate(180deg); }
            50% { filter: brightness(1.5) hue-rotate(90deg); }
        }
        
        /* çŒªå…«æˆ’ */
        .zhubajie {
            position: absolute;
            bottom: 180px;
            right: 15%;
            transform: translateX(50%);
            cursor: pointer;
            transition: all 0.3s;
            z-index: 50;
        }
        
        .zhubajie:hover {
            transform: translateX(50%) scale(1.1);
        }
        
        .bajie-body {
            position: relative;
            animation: bajieFloat 2.5s ease-in-out infinite;
        }
        
        @keyframes bajieFloat {
            0%, 100% { transform: translateY(0) rotate(2deg); }
            50% { transform: translateY(-12px) rotate(-2deg); }
        }
        
        /* çŒªå…«æˆ’æ”»å‡»åŠ¨ç”» */
        .zhubajie.attacking {
            animation: bajieAttack 0.5s ease-out;
        }
        
        @keyframes bajieAttack {
            0% { right: 15%; }
            50% { right: 35%; transform: translateX(50%) scale(1.2); }
            100% { right: 15%; }
        }
        
        /* çŒªå…«æˆ’å—ä¼¤åŠ¨ç”» */
        .zhubajie.hurt {
            animation: bajieHurt 0.5s ease-out;
        }
        
        @keyframes bajieHurt {
            0%, 100% { filter: brightness(1); }
            25%, 75% { filter: brightness(2) hue-rotate(180deg); }
            50% { filter: brightness(1.5) hue-rotate(90deg); }
        }
        
        /* èƒ½é‡æ”»å‡» */
        .energy-attack {
            position: absolute;
            opacity: 0;
            pointer-events: none;
            z-index: 40;
        }
        
        .potato-energy {
            left: 20%;
            bottom: 280px;
        }
        
        .bajie-energy {
            right: 20%;
            bottom: 280px;
        }
        
        .energy-ball {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            position: relative;
        }
        
        .potato-energy .energy-ball {
            background: radial-gradient(circle at 30% 30%, #90EE90, #228B22, #006400);
            box-shadow: 0 0 30px #32CD32, 0 0 60px #228B22, 0 0 90px #006400;
        }
        
        .bajie-energy .energy-ball {
            background: radial-gradient(circle at 30% 30%, #FFB6C1, #FF69B4, #FF1493);
            box-shadow: 0 0 30px #FF69B4, 0 0 60px #FF1493, 0 0 90px #C71585;
        }
        
        .energy-attack.active {
            animation: energyFly 1s ease-out forwards;
        }
        
        .potato-energy.active {
            animation: energyFlyRight 1s ease-out forwards;
        }
        
        .bajie-energy.active {
            animation: energyFlyLeft 1s ease-out forwards;
        }
        
        @keyframes energyFlyRight {
            0% { left: 20%; opacity: 1; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1.5); }
            100% { left: 70%; opacity: 0; transform: scale(2); }
        }
        
        @keyframes energyFlyLeft {
            0% { right: 20%; opacity: 1; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1.5); }
            100% { right: 70%; opacity: 0; transform: scale(2); }
        }
        
        /* çˆ†ç‚¸æ•ˆæœ */
        .explosion {
            position: absolute;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: radial-gradient(circle, #fff 0%, #ff0 20%, #f80 40%, #f00 60%, transparent 70%);
            opacity: 0;
            pointer-events: none;
            z-index: 60;
        }
        
        .explosion.active {
            animation: explode 0.5s ease-out forwards;
        }
        
        @keyframes explode {
            0% { transform: scale(0); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.8; }
            100% { transform: scale(2); opacity: 0; }
        }
        
        /* è¡€æ¡ */
        .health-bar {
            position: absolute;
            width: 200px;
            height: 25px;
            background: #333;
            border: 3px solid #fff;
            border-radius: 15px;
            overflow: hidden;
            z-index: 100;
        }
        
        .potato-health {
            top: 12%;
            left: 5%;
        }
        
        .bajie-health {
            top: 12%;
            right: 5%;
        }
        
        .health-fill {
            height: 100%;
            transition: width 0.3s;
        }
        
        .potato-health .health-fill {
            background: linear-gradient(90deg, #228B22, #32CD32, #90EE90);
            width: 100%;
        }
        
        .bajie-health .health-fill {
            background: linear-gradient(90deg, #FF1493, #FF69B4, #FFB6C1);
            width: 100%;
        }
        
        .health-label {
            position: absolute;
            top: -25px;
            left: 0;
            color: #fff;
            font-size: 1.2rem;
            text-shadow: 0 0 5px #000;
        }
        
        /* å¯¹è¯æ¡† */
        .dialog {
            position: absolute;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 15px 20px;
            font-size: 1.1rem;
            color: #333;
            max-width: 250px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            z-index: 100;
            opacity: 0;
            transform: scale(0);
            transition: all 0.3s;
        }
        
        .dialog.show {
            opacity: 1;
            transform: scale(1);
        }
        
        .potato-dialog {
            bottom: 450px;
            left: 5%;
        }
        
        .potato-dialog::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 30px;
            border: 15px solid transparent;
            border-top-color: rgba(255, 255, 255, 0.95);
            border-bottom: 0;
        }
        
        .bajie-dialog {
            bottom: 450px;
            right: 5%;
        }
        
        .bajie-dialog::after {
            content: '';
            position: absolute;
            bottom: -15px;
            right: 30px;
            border: 15px solid transparent;
            border-top-color: rgba(255, 255, 255, 0.95);
            border-bottom: 0;
        }
        
        /* éŸ³ä¹æ§åˆ¶æŒ‰é’® */
        .music-btn {
            position: absolute;
            top: 12%;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px 25px;
            font-size: 1rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: white;
            box-shadow: 0 3px 15px rgba(155, 89, 182, 0.5);
            font-family: inherit;
            z-index: 100;
            transition: all 0.3s;
        }
        
        .music-btn:hover {
            transform: translateX(-50%) scale(1.1);
        }
        
        .music-btn.playing {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            animation: musicPulse 1s ease-in-out infinite;
        }
        
        @keyframes musicPulse {
            0%, 100% { box-shadow: 0 3px 15px rgba(231, 76, 60, 0.5); }
            50% { box-shadow: 0 5px 25px rgba(231, 76, 60, 0.8); }
        }
        
        /* æ§åˆ¶æŒ‰é’® */
        .controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            z-index: 100;
        }
        
        .btn {
            padding: 15px 30px;
            font-size: 1.2rem;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
        }
        
        .btn-potato {
            background: linear-gradient(135deg, #228B22, #32CD32);
            color: white;
            box-shadow: 0 5px 20px rgba(50, 205, 50, 0.5);
        }
        
        .btn-potato:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 30px rgba(50, 205, 50, 0.7);
        }
        
        .btn-bajie {
            background: linear-gradient(135deg, #FF69B4, #FF1493);
            color: white;
            box-shadow: 0 5px 20px rgba(255, 105, 180, 0.5);
        }
        
        .btn-bajie:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 30px rgba(255, 105, 180, 0.7);
        }
        
        .btn-auto {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #333;
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.5);
        }
        
        .btn-auto:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 30px rgba(255, 215, 0, 0.7);
        }
        
        /* èƒœåˆ©ç”»é¢ */
        .victory {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4rem;
            color: #FFD700;
            text-shadow: 0 0 20px #FF6600, 0 0 40px #FF3300;
            opacity: 0;
            z-index: 200;
            pointer-events: none;
            text-align: center;
        }
        
        .victory.show {
            animation: victoryShow 2s ease-out forwards;
        }
        
        @keyframes victoryShow {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
            100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
        
        /* é—ªç”µç‰¹æ•ˆ */
        .lightning {
            position: absolute;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            opacity: 0;
            pointer-events: none;
            z-index: 150;
        }
        
        .lightning.flash {
            animation: lightningFlash 0.1s ease-out 3;
        }
        
        @keyframes lightningFlash {
            0%, 100% { opacity: 0; }
            50% { opacity: 0.8; }
        }
        
        /* çƒŸé›¾æ•ˆæœ */
        .smoke {
            position: absolute;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(128,128,128,0.8) 0%, transparent 70%);
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
        }
        
        .smoke.show {
            animation: smokeRise 1s ease-out forwards;
        }
        
        @keyframes smokeRise {
            0% { opacity: 0.8; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-100px) scale(2); }
        }
        
        /* è¿å‡»è®¡æ•° */
        .combo {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            color: #FF4500;
            text-shadow: 0 0 10px #FF0000;
            opacity: 0;
            z-index: 100;
            pointer-events: none;
        }
        
        .combo.show {
            animation: comboShow 0.5s ease-out forwards;
        }
        
        @keyframes comboShow {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.5); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(1) translateY(-50px); }
        }
        
        /* ä¹é½¿é’‰è€™ */
        .rake {
            position: absolute;
            right: 25%;
            bottom: 300px;
            transform: rotate(30deg);
            opacity: 0;
            z-index: 45;
        }
        
        .rake.show {
            animation: rakeAttack 0.5s ease-out forwards;
        }
        
        @keyframes rakeAttack {
            0% { right: 25%; opacity: 1; transform: rotate(30deg); }
            50% { right: 45%; transform: rotate(-30deg); }
            100% { right: 25%; opacity: 0; transform: rotate(30deg); }
        }
        
        .rake-handle {
            width: 150px;
            height: 8px;
            background: linear-gradient(90deg, #8B4513, #A0522D, #8B4513);
            border-radius: 4px;
        }
        
        .rake-head {
            position: absolute;
            left: -20px;
            top: -30px;
        }
        
        .rake-tooth {
            position: absolute;
            width: 3px;
            height: 40px;
            background: linear-gradient(to bottom, #C0C0C0, #A9A9A9);
            border-radius: 2px;
        }
        
        .rake-tooth:nth-child(1) { left: 0; top: 5px; }
        .rake-tooth:nth-child(2) { left: 6px; top: 0; }
        .rake-tooth:nth-child(3) { left: 12px; top: -3px; }
        .rake-tooth:nth-child(4) { left: 18px; top: 0; }
        .rake-tooth:nth-child(5) { left: 24px; top: 5px; }
        
        /* åœŸè±†å…‰å‰‘ */
        .lightsaber {
            position: absolute;
            left: 25%;
            bottom: 280px;
            width: 8px;
            height: 120px;
            background: linear-gradient(to top, #00FF00, #90EE90, #00FF00);
            border-radius: 4px;
            box-shadow: 0 0 20px #00FF00, 0 0 40px #32CD32;
            opacity: 0;
            z-index: 45;
            transform-origin: bottom center;
        }
        
        .lightsaber.show {
            animation: lightsaberAttack 0.5s ease-out forwards;
        }
        
        @keyframes lightsaberAttack {
            0% { left: 25%; opacity: 1; transform: rotate(-45deg); }
            50% { left: 45%; transform: rotate(45deg); }
            100% { left: 25%; opacity: 0; transform: rotate(-45deg); }
        }
        
        /* åœºæ™¯ç‰¹æ•ˆ - èƒ½é‡åœº */
        .energy-field {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            height: 300px;
            border: 3px solid rgba(255, 215, 0, 0.3);
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
            z-index: 30;
        }
        
        .energy-field.active {
            animation: fieldExpand 1s ease-out forwards;
        }
        
        @keyframes fieldExpand {
            0% { width: 100px; height: 100px; opacity: 0.8; }
            100% { width: 600px; height: 600px; opacity: 0; }
        }
        
        /* å›åˆæŒ‡ç¤º */
        .turn-indicator {
            position: absolute;
            top: 18%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.5rem;
            color: #FFD700;
            text-shadow: 0 0 10px #FF6600;
            opacity: 0;
            z-index: 100;
        }
        
        .turn-indicator.show {
            animation: turnShow 1s ease-out forwards;
        }
        
        @keyframes turnShow {
            0% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
            30% { opacity: 1; transform: translateX(-50%) translateY(0); }
            70% { opacity: 1; }
            100% { opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- æ˜Ÿæ˜Ÿ -->
        <div class="stars" id="stars"></div>
        
        <!-- é—ªç”µç‰¹æ•ˆ -->
        <div class="lightning" id="lightning"></div>
        
        <!-- æ ‡é¢˜ -->
        <div class="title">ğŸ¥” åœŸè±†å¤§äºº vs çŒªå…«æˆ’ ğŸ·</div>
        
        <!-- éŸ³ä¹æ§åˆ¶æŒ‰é’® -->
        <button class="music-btn" id="musicBtn" onclick="toggleMusic()">ğŸµ å¼€å¯æˆ˜æ–—éŸ³ä¹</button>
        
        <!-- è¡€æ¡ -->
        <div class="health-bar potato-health">
            <div class="health-label">ğŸ¥” åœŸè±†å¤§äºº</div>
            <div class="health-fill" id="potatoHealth"></div>
        </div>
        
        <div class="health-bar bajie-health">
            <div class="health-label">ğŸ· çŒªå…«æˆ’</div>
            <div class="health-fill" id="bajieHealth"></div>
        </div>
        
        <!-- å›åˆæŒ‡ç¤º -->
        <div class="turn-indicator" id="turnIndicator"></div>
        
        <!-- å¯¹è¯æ¡† -->
        <div class="dialog potato-dialog" id="potatoDialog"></div>
        <div class="dialog bajie-dialog" id="bajieDialog"></div>
        
        <!-- èƒ½é‡æ”»å‡» -->
        <div class="energy-attack potato-energy" id="potatoEnergy">
            <div class="energy-ball"></div>
        </div>
        <div class="energy-attack bajie-energy" id="bajieEnergy">
            <div class="energy-ball"></div>
        </div>
        
        <!-- æ­¦å™¨ -->
        <div class="lightsaber" id="lightsaber"></div>
        <div class="rake" id="rake">
            <div class="rake-handle"></div>
            <div class="rake-head">
                <div class="rake-tooth"></div>
                <div class="rake-tooth"></div>
                <div class="rake-tooth"></div>
                <div class="rake-tooth"></div>
                <div class="rake-tooth"></div>
            </div>
        </div>
        
        <!-- çˆ†ç‚¸æ•ˆæœ -->
        <div class="explosion" id="explosion"></div>
        
        <!-- è¿å‡» -->
        <div class="combo" id="combo"></div>
        
        <!-- èƒ½é‡åœº -->
        <div class="energy-field" id="energyField"></div>
        
        <!-- åœŸè±†å¤§äºº -->
        <div class="potato" id="potato" onclick="potatoAttack()">
            <svg class="potato-body" width="180" height="220" viewBox="0 0 180 220">
                <!-- åœŸè±†èº«ä½“ -->
                <ellipse cx="90" cy="130" rx="70" ry="80" fill="#8B7355"/>
                <ellipse cx="90" cy="130" rx="65" ry="75" fill="#A0826D"/>
                
                <!-- åœŸè±†çº¹ç† -->
                <ellipse cx="60" cy="100" rx="15" ry="8" fill="#8B7355" opacity="0.5"/>
                <ellipse cx="120" cy="150" rx="12" ry="6" fill="#8B7355" opacity="0.5"/>
                <ellipse cx="80" cy="180" rx="10" ry="5" fill="#8B7355" opacity="0.5"/>
                
                <!-- åœŸè±†æ–‘ç‚¹ -->
                <circle cx="50" cy="120" r="4" fill="#6B5344"/>
                <circle cx="130" cy="110" r="3" fill="#6B5344"/>
                <circle cx="100" cy="170" r="3" fill="#6B5344"/>
                <circle cx="70" cy="150" r="2" fill="#6B5344"/>
                <circle cx="110" cy="140" r="2" fill="#6B5344"/>
                
                <!-- è¶…äººæŠ«é£ -->
                <path d="M40 100 Q20 150 30 220 L90 200 L150 220 Q160 150 140 100" fill="#FF0000" opacity="0.9"/>
                <path d="M50 105 Q35 150 45 200 L90 185 L135 200 Q145 150 130 105" fill="#CC0000"/>
                
                <!-- çœ¼ç› -->
                <ellipse cx="65" cy="100" rx="18" ry="20" fill="white"/>
                <ellipse cx="115" cy="100" rx="18" ry="20" fill="white"/>
                <circle cx="70" cy="102" r="10" fill="#4A4A4A"/>
                <circle cx="120" cy="102" r="10" fill="#4A4A4A"/>
                <circle cx="73" cy="99" r="4" fill="white"/>
                <circle cx="123" cy="99" r="4" fill="white"/>
                
                <!-- çœ‰æ¯› - è‹±å‹‡ -->
                <path d="M45 75 Q65 65 85 78" stroke="#5D4037" stroke-width="5" fill="none"/>
                <path d="M135 75 Q115 65 95 78" stroke="#5D4037" stroke-width="5" fill="none"/>
                
                <!-- é¼»å­ -->
                <ellipse cx="90" cy="125" rx="8" ry="5" fill="#8B7355"/>
                
                <!-- å˜´å·´ - è‡ªä¿¡å¾®ç¬‘ -->
                <path d="M70 145 Q90 165 110 145" stroke="#5D4037" stroke-width="4" fill="none"/>
                
                <!-- åœŸè±†çš‡å†  -->
                <path d="M50 50 L60 25 L75 45 L90 15 L105 45 L120 25 L130 50" fill="#FFD700" stroke="#FFA500" stroke-width="2"/>
                <circle cx="90" cy="35" r="8" fill="#FF4500"/>
                <circle cx="65" cy="40" r="5" fill="#00CED1"/>
                <circle cx="115" cy="40" r="5" fill="#00CED1"/>
                
                <!-- æ‰‹è‡‚ -->
                <path d="M25 120 Q0 100 10 70" stroke="#A0826D" stroke-width="20" fill="none" stroke-linecap="round"/>
                <path d="M155 120 Q180 100 170 70" stroke="#A0826D" stroke-width="20" fill="none" stroke-linecap="round"/>
                
                <!-- æ‰‹å¥— -->
                <circle cx="10" cy="65" r="15" fill="#FF0000"/>
                <circle cx="170" cy="65" r="15" fill="#FF0000"/>
                
                <!-- è…¿ -->
                <path d="M70 200 Q65 220 60 230" stroke="#A0826D" stroke-width="18" fill="none" stroke-linecap="round"/>
                <path d="M110 200 Q115 220 120 230" stroke="#A0826D" stroke-width="18" fill="none" stroke-linecap="round"/>
                
                <!-- é´å­ -->
                <ellipse cx="55" cy="235" rx="20" ry="12" fill="#FF0000"/>
                <ellipse cx="125" cy="235" rx="20" ry="12" fill="#FF0000"/>
                
                <!-- èƒ¸ç«  - åœŸè±†æ ‡å¿— -->
                <circle cx="90" cy="130" r="15" fill="#FFD700" stroke="#FFA500" stroke-width="2"/>
                <text x="90" y="135" text-anchor="middle" font-size="16" fill="#8B4513">ğŸ¥”</text>
            </svg>
        </div>
        
        <!-- çŒªå…«æˆ’ -->
        <div class="zhubajie" id="zhubajie" onclick="bajieAttack()">
            <svg class="bajie-body" width="200" height="240" viewBox="0 0 200 240">
                <!-- èº«ä½“ -->
                <ellipse cx="100" cy="160" rx="50" ry="55" fill="#FFB6C1"/>
                
                <!-- è‚šå­ -->
                <ellipse cx="100" cy="165" rx="35" ry="40" fill="#FFC0CB"/>
                
                <!-- åƒ§è¢ -->
                <path d="M50 130 Q100 200 150 130 L145 210 Q100 240 55 210 Z" fill="#1E90FF" stroke="#000080" stroke-width="2"/>
                
                <!-- å¤´éƒ¨ -->
                <circle cx="100" cy="60" r="50" fill="#FFB6C1"/>
                
                <!-- çŒªè€³æœµ -->
                <ellipse cx="40" cy="40" rx="22" ry="32" fill="#FFB6C1" stroke="#FF69B4" stroke-width="2"/>
                <ellipse cx="48" cy="40" rx="10" ry="16" fill="#FF69B4"/>
                <ellipse cx="160" cy="40" rx="22" ry="32" fill="#FFB6C1" stroke="#FF69B4" stroke-width="2"/>
                <ellipse cx="152" cy="40" rx="10" ry="16" fill="#FF69B4"/>
                
                <!-- çŒªé¼»å­ -->
                <ellipse cx="100" cy="75" rx="22" ry="16" fill="#FF69B4"/>
                <circle cx="92" cy="75" r="4" fill="#8B4513"/>
                <circle cx="108" cy="75" r="4" fill="#8B4513"/>
                
                <!-- çœ¼ç› -->
                <ellipse cx="75" cy="45" rx="10" ry="12" fill="white"/>
                <ellipse cx="125" cy="45" rx="10" ry="12" fill="white"/>
                <circle cx="75" cy="47" r="6" fill="#000"/>
                <circle cx="125" cy="47" r="6" fill="#000"/>
                <circle cx="77" cy="45" r="2" fill="white"/>
                <circle cx="127" cy="45" r="2" fill="white"/>
                
                <!-- çœ‰æ¯› - æ„¤æ€’ -->
                <path d="M60 30 Q75 25 90 35" stroke="#8B4513" stroke-width="3" fill="none"/>
                <path d="M140 30 Q125 25 110 35" stroke="#8B4513" stroke-width="3" fill="none"/>
                
                <!-- å˜´å·´ -->
                <path d="M80 100 Q100 115 120 100" stroke="#8B4513" stroke-width="2" fill="none"/>
                
                <!-- ç ç‰™ -->
                <path d="M85 100 L82 112 L88 100" fill="white"/>
                <path d="M115 100 L118 112 L112 100" fill="white"/>
                
                <!-- åƒ§å¸½ -->
                <path d="M50 15 Q100 -15 150 15 L140 25 Q100 0 60 25 Z" fill="#FFD700" stroke="#FF8C00" stroke-width="2"/>
                <circle cx="100" cy="8" r="7" fill="#FF4500"/>
                
                <!-- æ‰‹è‡‚ -->
                <path d="M50 130 Q25 120 10 90" stroke="#FFB6C1" stroke-width="16" fill="none" stroke-linecap="round"/>
                <path d="M150 130 Q175 120 190 90" stroke="#FFB6C1" stroke-width="16" fill="none" stroke-linecap="round"/>
                
                <!-- æ‰‹æŒ -->
                <circle cx="10" cy="85" r="12" fill="#FFB6C1"/>
                <circle cx="190" cy="85" r="12" fill="#FFB6C1"/>
                
                <!-- è…¿ -->
                <path d="M80 210 Q75 225 70 235" stroke="#FFB6C1" stroke-width="12" fill="none" stroke-linecap="round"/>
                <path d="M120 210 Q125 225 130 235" stroke="#FFB6C1" stroke-width="12" fill="none" stroke-linecap="round"/>
                
                <!-- é‹å­ -->
                <ellipse cx="65" cy="238" rx="16" ry="9" fill="#1E90FF"/>
                <ellipse cx="135" cy="238" rx="16" ry="9" fill="#1E90FF"/>
                
                <!-- æˆ˜æ–—æ°”æ¯ -->
                <circle cx="100" cy="60" r="55" fill="none" stroke="#FF69B4" stroke-width="2" opacity="0.3">
                    <animate attributeName="r" values="55;65;55" dur="1s" repeatCount="indefinite"/>
                    <animate attributeName="opacity" values="0.3;0.6;0.3" dur="1s" repeatCount="indefinite"/>
                </circle>
            </svg>
        </div>
        
        <!-- æˆ˜æ–—åœºåœ° -->
        <div class="battle-ground"></div>
        
        <!-- èƒœåˆ©ç”»é¢ -->
        <div class="victory" id="victory"></div>
        
        <!-- æ§åˆ¶æŒ‰é’® -->
        <div class="controls">
            <button class="btn btn-potato" onclick="potatoAttack()">ğŸ¥” åœŸè±†æ”»å‡»</button>
            <button class="btn btn-auto" onclick="autoBattle()">âš”ï¸ è‡ªåŠ¨æˆ˜æ–—</button>
            <button class="btn btn-bajie" onclick="bajieAttack()">ğŸ· å…«æˆ’æ”»å‡»</button>
        </div>
    </div>
    
    <script>
        // ==================== éŸ³é¢‘ç³»ç»Ÿ ====================
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        let audioCtx = null;
        let bgMusicInterval = null;
        
        // åˆå§‹åŒ–éŸ³é¢‘ä¸Šä¸‹æ–‡
        function initAudio() {
            if (!audioCtx) {
                audioCtx = new AudioContext();
            }
            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
        }
        
        // æ’­æ”¾éŸ³ç¬¦
        function playNote(frequency, duration, type = 'sine', volume = 0.3, delay = 0) {
            if (!audioCtx) return;
            
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            
            oscillator.type = type;
            oscillator.frequency.setValueAtTime(frequency, audioCtx.currentTime + delay);
            
            gainNode.gain.setValueAtTime(0, audioCtx.currentTime + delay);
            gainNode.gain.linearRampToValueAtTime(volume, audioCtx.currentTime + delay + 0.01);
            gainNode.gain.linearRampToValueAtTime(0, audioCtx.currentTime + delay + duration);
            
            oscillator.start(audioCtx.currentTime + delay);
            oscillator.stop(audioCtx.currentTime + delay + duration);
        }
        
        // èƒŒæ™¯éŸ³ä¹ - å²è¯—æˆ˜æ–—é£æ ¼
        function playBackgroundMusic() {
            if (bgMusicInterval) return;
            
            initAudio();
            
            const melody = [
                { note: 261.63, duration: 0.3 }, // C4
                { note: 293.66, duration: 0.3 }, // D4
                { note: 329.63, duration: 0.3 }, // E4
                { note: 349.23, duration: 0.3 }, // F4
                { note: 392.00, duration: 0.6 }, // G4
                { note: 349.23, duration: 0.3 }, // F4
                { note: 329.63, duration: 0.3 }, // E4
                { note: 293.66, duration: 0.6 }, // D4
            ];
            
            let noteIndex = 0;
            let time = 0;
            
            function playMelody() {
                if (!audioCtx) return;
                
                melody.forEach((note, i) => {
                    // ä¸»æ—‹å¾‹
                    playNote(note.note, note.duration * 0.9, 'triangle', 0.15, time);
                    // ä½éŸ³
                    playNote(note.note / 2, note.duration * 0.9, 'sine', 0.1, time);
                    time += note.duration;
                });
            }
            
            playMelody();
            bgMusicInterval = setInterval(() => {
                time = 0;
                playMelody();
            }, 3000);
        }
        
        // åœæ­¢èƒŒæ™¯éŸ³ä¹
        function stopBackgroundMusic() {
            if (bgMusicInterval) {
                clearInterval(bgMusicInterval);
                bgMusicInterval = null;
            }
        }
        
        // æ”»å‡»éŸ³æ•ˆ - èƒ½é‡çƒ
        function playEnergyAttackSound() {
            initAudio();
            
            // èƒ½é‡è“„åŠ›å£°
            playNote(200, 0.2, 'sawtooth', 0.2, 0);
            playNote(300, 0.2, 'sawtooth', 0.2, 0.1);
            playNote(400, 0.2, 'sawtooth', 0.2, 0.2);
            
            // å‘å°„å£°
            playNote(600, 0.1, 'square', 0.15, 0.3);
            playNote(800, 0.1, 'square', 0.15, 0.35);
            playNote(1000, 0.15, 'square', 0.1, 0.4);
            
            // é£è¡Œå£°
            for (let i = 0; i < 5; i++) {
                playNote(500 + i * 100, 0.1, 'sine', 0.1, 0.5 + i * 0.1);
            }
        }
        
        // æ”»å‡»éŸ³æ•ˆ - æ­¦å™¨æŒ¥èˆ
        function playWeaponSwingSound() {
            initAudio();
            
            // æŒ¥èˆå£°
            playNote(150, 0.1, 'sawtooth', 0.2, 0);
            playNote(200, 0.1, 'sawtooth', 0.2, 0.05);
            playNote(300, 0.1, 'sawtooth', 0.2, 0.1);
            
            // å‘¼å•¸å£°
            for (let i = 0; i < 8; i++) {
                playNote(400 + Math.random() * 200, 0.05, 'sine', 0.1, 0.15 + i * 0.03);
            }
            
            // å‡»ä¸­å£°
            playNote(200, 0.15, 'square', 0.25, 0.4);
            playNote(150, 0.2, 'square', 0.2, 0.45);
        }
        
        // çˆ†ç‚¸éŸ³æ•ˆ
        function playExplosionSound() {
            initAudio();
            
            // çˆ†ç‚¸ä¸»ä½“
            playNote(100, 0.3, 'sawtooth', 0.3, 0);
            playNote(80, 0.4, 'square', 0.25, 0.05);
            playNote(60, 0.5, 'sawtooth', 0.2, 0.1);
            
            // é«˜é¢‘ç¢ç‰‡
            for (let i = 0; i < 6; i++) {
                playNote(800 + Math.random() * 400, 0.1, 'square', 0.1, 0.1 + i * 0.03);
            }
            
            // ä½é¢‘ä½™éœ‡
            playNote(50, 0.6, 'sine', 0.15, 0.3);
        }
        
        // å—ä¼¤éŸ³æ•ˆ
        function playHurtSound() {
            initAudio();
            
            playNote(300, 0.1, 'square', 0.2, 0);
            playNote(250, 0.1, 'square', 0.2, 0.05);
            playNote(200, 0.15, 'square', 0.15, 0.1);
        }
        
        // èƒœåˆ©éŸ³æ•ˆ
        function playVictorySound() {
            initAudio();
            
            const victoryMelody = [
                { note: 523.25, duration: 0.2 }, // C5
                { note: 659.25, duration: 0.2 }, // E5
                { note: 783.99, duration: 0.2 }, // G5
                { note: 1046.50, duration: 0.5 }, // C6
            ];
            
            let time = 0;
            victoryMelody.forEach((note, i) => {
                playNote(note.note, note.duration, 'triangle', 0.25, time);
                playNote(note.note / 2, note.duration, 'sine', 0.15, time);
                time += note.duration;
            });
        }
        
        // è¿å‡»éŸ³æ•ˆ
        function playComboSound(combo) {
            initAudio();
            
            const baseFreq = 400 + combo * 50;
            playNote(baseFreq, 0.1, 'square', 0.15, 0);
            playNote(baseFreq * 1.5, 0.15, 'square', 0.12, 0.1);
        }
        
        // æ¸¸æˆçŠ¶æ€
        let gameState = {
            potatoHealth: 100,
            bajieHealth: 100,
            isAnimating: false,
            autoMode: false,
            combo: 0
        };
        
        // ç”Ÿæˆæ˜Ÿæ˜Ÿ
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 150; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.width = Math.random() * 3 + 1 + 'px';
            star.style.height = star.style.width;
            star.style.animationDelay = Math.random() * 2 + 's';
            starsContainer.appendChild(star);
        }
        
        // åœŸè±†å¤§äººçš„å°è¯
        const potatoLines = [
            "æˆ‘æ˜¯åœŸè±†å¤§äººï¼Œè°æ•¢ä¸æˆ‘ä¸€æˆ˜ï¼",
            "åœŸè±†ä¹‹åŠ›ï¼Œæ— ç©·æ— å°½ï¼",
            "ä½ è¿™åªèƒ–çŒªï¼Œçœ‹æ‹›ï¼",
            "æ·€ç²‰çš„åŠ›é‡ï¼Œä½ æ— æ³•æƒ³è±¡ï¼",
            "ä»Šå¤©å°±æŠŠä½ åšæˆçº¢çƒ§è‚‰ï¼",
            "æˆ‘çš„çš‡å† é—ªè€€ç€æ­£ä¹‰ä¹‹å…‰ï¼",
            "åœŸè±†æ³¥çš„æ„¤æ€’ï¼Œä½ æ‰¿å—ä¸èµ·ï¼",
            "æ¥æ‹›å§ï¼Œæ·€ç²‰å†²å‡»æ³¢ï¼"
        ];
        
        // çŒªå…«æˆ’çš„å°è¯
        const bajieLines = [
            "å“¼ï¼å°å°åœŸè±†ä¹Ÿæ•¢æŒ‘æˆ˜å¤©è“¬å…ƒå¸…ï¼Ÿ",
            "ä¿ºè€çŒªçš„ä¹é½¿é’‰è€™å¯ä¸æ˜¯åƒç´ çš„ï¼",
            "çœ‹æˆ‘æ€ä¹ˆæŠŠä½ ç‚¸æˆè–¯æ¡ï¼",
            "ä½ è¿™ç‚¹æœ¬äº‹ï¼Œè¿˜å·®å¾—è¿œå‘¢ï¼",
            "å¸ˆå‚…è¯´è¿‡ï¼Œä¸èƒ½æ¬ºè´Ÿå¼±å°ï¼Œä½†ä½ æ˜¯åœŸè±†ï¼",
            "æˆ‘çš„é’‰è€™å·²ç»é¥¥æ¸´éš¾è€äº†ï¼",
            "åˆ«ä»¥ä¸ºæˆ´ç€çš‡å† å°±æ˜¯ç‹è€…ï¼",
            "ä»Šå¤©æ™šé¤å°±åƒåœŸè±†ç‚–è‚‰ï¼"
        ];
        
        // æ˜¾ç¤ºå¯¹è¯
        function showDialog(character, text) {
            const dialog = document.getElementById(character + 'Dialog');
            dialog.textContent = text;
            dialog.classList.add('show');
            setTimeout(() => dialog.classList.remove('show'), 2000);
            
            // è¯­éŸ³æ’­æŠ¥
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'zh-CN';
            utterance.rate = 0.9;
            if (character === 'potato') {
                utterance.pitch = 1.3; // åœŸè±†å¤§äººå£°éŸ³é«˜ä¸€ç‚¹
            } else {
                utterance.pitch = 0.8; // çŒªå…«æˆ’å£°éŸ³ä½ä¸€ç‚¹
            }
            speechSynthesis.speak(utterance);
        }
        
        // æ›´æ–°è¡€æ¡
        function updateHealth() {
            document.getElementById('potatoHealth').style.width = gameState.potatoHealth + '%';
            document.getElementById('bajieHealth').style.width = gameState.bajieHealth + '%';
        }
        
        // æ˜¾ç¤ºå›åˆæŒ‡ç¤º
        function showTurn(text) {
            const indicator = document.getElementById('turnIndicator');
            indicator.textContent = text;
            indicator.classList.add('show');
            setTimeout(() => indicator.classList.remove('show'), 1000);
        }
        
        // æ˜¾ç¤ºè¿å‡»
        function showCombo(count) {
            const combo = document.getElementById('combo');
            combo.textContent = count + ' è¿å‡»!';
            combo.classList.add('show');
            setTimeout(() => combo.classList.remove('show'), 500);
        }
        
        // é—ªç”µç‰¹æ•ˆ
        function flashLightning() {
            const lightning = document.getElementById('lightning');
            lightning.classList.add('flash');
            setTimeout(() => lightning.classList.remove('flash'), 300);
        }
        
        // çˆ†ç‚¸æ•ˆæœ
        function showExplosion(x, y) {
            const explosion = document.getElementById('explosion');
            explosion.style.left = x + 'px';
            explosion.style.top = y + 'px';
            explosion.classList.add('active');
            setTimeout(() => explosion.classList.remove('active'), 500);
        }
        
        // èƒ½é‡åœºæ•ˆæœ
        function showEnergyField() {
            const field = document.getElementById('energyField');
            field.classList.add('active');
            setTimeout(() => field.classList.remove('active'), 1000);
        }
        
        // åˆ‡æ¢éŸ³ä¹
        function toggleMusic() {
            const btn = document.getElementById('musicBtn');
            if (bgMusicInterval) {
                stopBackgroundMusic();
                btn.textContent = 'ğŸµ å¼€å¯æˆ˜æ–—éŸ³ä¹';
                btn.classList.remove('playing');
            } else {
                playBackgroundMusic();
                btn.textContent = 'ğŸ”‡ å…³é—­æˆ˜æ–—éŸ³ä¹';
                btn.classList.add('playing');
            }
        }
        
        // åœŸè±†æ”»å‡»
        function potatoAttack() {
            if (gameState.isAnimating || gameState.bajieHealth <= 0 || gameState.potatoHealth <= 0) return;
            gameState.isAnimating = true;
            
            const potato = document.getElementById('potato');
            const potatoEnergy = document.getElementById('potatoEnergy');
            const lightsaber = document.getElementById('lightsaber');
            const zhubajie = document.getElementById('zhubajie');
            
            // éšæœºæ”»å‡»ç±»å‹
            const attackType = Math.random();
            
            // æ˜¾ç¤ºå¯¹è¯
            showDialog('potato', potatoLines[Math.floor(Math.random() * potatoLines.length)]);
            showTurn('ğŸ¥” åœŸè±†å¤§äºº æ”»å‡»!');
            
            setTimeout(() => {
                if (attackType < 0.5) {
                    // èƒ½é‡çƒæ”»å‡»
                    playEnergyAttackSound(); // æ’­æ”¾èƒ½é‡çƒéŸ³æ•ˆ
                    potatoEnergy.classList.add('active');
                    setTimeout(() => {
                        potatoEnergy.classList.remove('active');
                        flashLightning();
                        playExplosionSound(); // æ’­æ”¾çˆ†ç‚¸éŸ³æ•ˆ
                        showExplosion(window.innerWidth * 0.7, window.innerHeight * 0.4);
                        zhubajie.classList.add('hurt');
                        playHurtSound(); // æ’­æ”¾å—ä¼¤éŸ³æ•ˆ
                        
                        // ä¼¤å®³è®¡ç®—
                        const damage = 10 + Math.floor(Math.random() * 15);
                        gameState.bajieHealth = Math.max(0, gameState.bajieHealth - damage);
                        updateHealth();
                        
                        gameState.combo++;
                        showCombo(gameState.combo);
                        playComboSound(gameState.combo); // æ’­æ”¾è¿å‡»éŸ³æ•ˆ
                        
                        setTimeout(() => {
                            zhubajie.classList.remove('hurt');
                            gameState.isAnimating = false;
                            checkVictory();
                        }, 500);
                    }, 1000);
                } else {
                    // å…‰å‰‘æ”»å‡»
                    playWeaponSwingSound(); // æ’­æ”¾æ­¦å™¨æŒ¥èˆéŸ³æ•ˆ
                    lightsaber.classList.add('show');
                    potato.classList.add('attacking');
                    
                    setTimeout(() => {
                        flashLightning();
                        playExplosionSound(); // æ’­æ”¾çˆ†ç‚¸éŸ³æ•ˆ
                        showExplosion(window.innerWidth * 0.65, window.innerHeight * 0.5);
                        zhubajie.classList.add('hurt');
                        playHurtSound(); // æ’­æ”¾å—ä¼¤éŸ³æ•ˆ
                        
                        const damage = 15 + Math.floor(Math.random() * 10);
                        gameState.bajieHealth = Math.max(0, gameState.bajieHealth - damage);
                        updateHealth();
                        
                        gameState.combo++;
                        showCombo(gameState.combo);
                        playComboSound(gameState.combo); // æ’­æ”¾è¿å‡»éŸ³æ•ˆ
                        
                        setTimeout(() => {
                            lightsaber.classList.remove('show');
                            potato.classList.remove('attacking');
                            zhubajie.classList.remove('hurt');
                            gameState.isAnimating = false;
                            checkVictory();
                        }, 500);
                    }, 500);
                }
            }, 500);
        }
        
        // çŒªå…«æˆ’æ”»å‡»
        function bajieAttack() {
            if (gameState.isAnimating || gameState.bajieHealth <= 0 || gameState.potatoHealth <= 0) return;
            gameState.isAnimating = true;
            
            const zhubajie = document.getElementById('zhubajie');
            const bajieEnergy = document.getElementById('bajieEnergy');
            const rake = document.getElementById('rake');
            const potato = document.getElementById('potato');
            
            const attackType = Math.random();
            
            // æ˜¾ç¤ºå¯¹è¯
            showDialog('bajie', bajieLines[Math.floor(Math.random() * bajieLines.length)]);
            showTurn('ğŸ· çŒªå…«æˆ’ æ”»å‡»!');
            
            setTimeout(() => {
                if (attackType < 0.5) {
                    // èƒ½é‡çƒæ”»å‡»
                    playEnergyAttackSound(); // æ’­æ”¾èƒ½é‡çƒéŸ³æ•ˆ
                    bajieEnergy.classList.add('active');
                    setTimeout(() => {
                        bajieEnergy.classList.remove('active');
                        flashLightning();
                        playExplosionSound(); // æ’­æ”¾çˆ†ç‚¸éŸ³æ•ˆ
                        showExplosion(window.innerWidth * 0.3, window.innerHeight * 0.4);
                        potato.classList.add('hurt');
                        playHurtSound(); // æ’­æ”¾å—ä¼¤éŸ³æ•ˆ
                        
                        const damage = 8 + Math.floor(Math.random() * 12);
                        gameState.potatoHealth = Math.max(0, gameState.potatoHealth - damage);
                        updateHealth();
                        
                        gameState.combo = 0; // é‡ç½®è¿å‡»
                        
                        setTimeout(() => {
                            potato.classList.remove('hurt');
                            gameState.isAnimating = false;
                            checkVictory();
                        }, 500);
                    }, 1000);
                } else {
                    // é’‰è€™æ”»å‡»
                    playWeaponSwingSound(); // æ’­æ”¾æ­¦å™¨æŒ¥èˆéŸ³æ•ˆ
                    rake.classList.add('show');
                    zhubajie.classList.add('attacking');
                    
                    setTimeout(() => {
                        flashLightning();
                        playExplosionSound(); // æ’­æ”¾çˆ†ç‚¸éŸ³æ•ˆ
                        showExplosion(window.innerWidth * 0.35, window.innerHeight * 0.5);
                        potato.classList.add('hurt');
                        playHurtSound(); // æ’­æ”¾å—ä¼¤éŸ³æ•ˆ
                        
                        const damage = 12 + Math.floor(Math.random() * 8);
                        gameState.potatoHealth = Math.max(0, gameState.potatoHealth - damage);
                        updateHealth();
                        
                        gameState.combo = 0;
                        
                        setTimeout(() => {
                            rake.classList.remove('show');
                            zhubajie.classList.remove('attacking');
                            potato.classList.remove('hurt');
                            gameState.isAnimating = false;
                            checkVictory();
                        }, 500);
                    }, 500);
                }
            }, 500);
        }
        
        // æ£€æŸ¥èƒœåˆ©
        function checkVictory() {
            if (gameState.potatoHealth <= 0) {
                showVictory('ğŸ· çŒªå…«æˆ’è·èƒœï¼\nåœŸè±†å˜æˆäº†è–¯æ¡ï¼');
                gameState.autoMode = false;
            } else if (gameState.bajieHealth <= 0) {
                showVictory('ğŸ¥” åœŸè±†å¤§äººè·èƒœï¼\nçŒªå…«æˆ’å˜æˆäº†çº¢çƒ§è‚‰ï¼');
                gameState.autoMode = false;
            }
        }
        
        // æ˜¾ç¤ºèƒœåˆ©ç”»é¢
        function showVictory(text) {
            const victory = document.getElementById('victory');
            victory.innerHTML = text.replace('\n', '<br>');
            victory.classList.add('show');
            showEnergyField();
            
            // è¯­éŸ³æ’­æŠ¥
            const utterance = new SpeechSynthesisUtterance(text.replace('\n', ' '));
            utterance.lang = 'zh-CN';
            utterance.rate = 0.9;
            speechSynthesis.speak(utterance);
        }
        
        // è‡ªåŠ¨æˆ˜æ–—
        function autoBattle() {
            if (gameState.autoMode) {
                gameState.autoMode = false;
                return;
            }
            
            gameState.autoMode = true;
            showDialog('potato', 'æ¥å§ï¼Œè®©æˆ‘çœ‹çœ‹ä½ çš„æœ¬äº‹ï¼');
            
            function autoAttack() {
                if (!gameState.autoMode || gameState.potatoHealth <= 0 || gameState.bajieHealth <= 0) return;
                
                if (!gameState.isAnimating) {
                    if (Math.random() < 0.5) {
                        potatoAttack();
                    } else {
                        bajieAttack();
                    }
                }
                
                setTimeout(autoAttack, 2000);
            }
            
            autoAttack();
        }
        
        // åˆå§‹åŒ–
        updateHealth();
        
        // å¼€åœºç™½
        setTimeout(() => {
            showDialog('potato', 'æˆ‘æ˜¯åœŸè±†å¤§äººï¼Œä»Šå¤©è¦æŒ‘æˆ˜ä½ è¿™åªèƒ–çŒªï¼');
            setTimeout(() => {
                showDialog('bajie', 'å“¼ï¼å°å°åœŸè±†ä¹Ÿæ•¢æŒ‘æˆ˜å¤©è“¬å…ƒå¸…ï¼Ÿ');
            }, 2500);
        }, 1000);
    </script>
</body>
</html>